{"version":3,"sources":["search.ts"],"names":[],"mappings":"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","file":"search.js","sourceRoot":"","sourcesContent":["import {Component, ViewChild, HostBinding, Input, AfterViewInit, HostListener, EventEmitter, Output, forwardRef, Directive, ElementRef} from '@angular/core';\r\nimport {DropdownService} from '../dropdown/dropdown.service';\r\nimport {SuiDropdownMenu} from '../dropdown/dropdown-menu';\r\nimport {SearchService, LookupFn} from './search.service';\r\nimport {readValue} from '../util/util';\r\nimport {PositioningService, PositioningPlacement} from '../util/positioning.service';\r\nimport {customValueAccessorFactory, CustomValueAccessor, CustomValueAccessorHost} from '../util/custom-value-accessor';\nexport class SuiSearch<T> implements AfterViewInit, CustomValueAccessorHost<T> {\npublic dropdownService:DropdownService;\npublic searchService:SearchService<T>;\nprivate _menu:SuiDropdownMenu;\nprivate _searchClasses:boolean;\n/**\n * @return {?}\n */\npublic get isActive() {\r\n        return this.dropdownService.isOpen;\r\n    }\npublic hasIcon:boolean;\npublic placeholder:string;\n/**\n * @return {?}\n */\npublic get query() {\r\n        return this.searchService.query;\r\n    }\n/**\n * @param {?} query\n * @return {?}\n */\npublic set query(query:string) {\r\n        this.selectedItem = null;\r\n        // Initialise a delayed search.\r\n        this.searchService.updateQueryDelayed(query, () =>\r\n            // Set the results open state depending on whether a query has been entered.\r\n            this.dropdownService.setOpenState(this.searchService.query.length > 0));\r\n    }\n/**\n * @param {?} options\n * @return {?}\n */\npublic set options(options:T[] | LookupFn<T>) {\r\n        if (typeof options == \"function\") {\r\n            this.searchService.optionsLookup = options;\r\n            return;\r\n        }\r\n        this.searchService.options = options;\r\n    }\n/**\n * @param {?} field\n * @return {?}\n */\npublic set optionsField(field:string) {\r\n        this.searchService.optionsField = field;\r\n    }\n/**\n * @param {?} delay\n * @return {?}\n */\npublic set searchDelay(delay:number) {\r\n        this.searchService.searchDelay = delay;\r\n    }\n/**\n * @return {?}\n */\npublic get isSearching() {\r\n        return this.searchService.isSearching;\r\n    }\n/**\n * @return {?}\n */\npublic get results() {\r\n        return this.searchService.results;\r\n    }\npublic selectedItem:T;\npublic itemSelected:EventEmitter<T>;\n/**\n * @param {?} _element\n */\nconstructor(private _element:ElementRef) {\r\n        this.dropdownService = new DropdownService();\r\n        this.searchService = new SearchService<T>();\r\n\r\n        this._searchClasses = true;\r\n        this.hasIcon = true;\r\n        this.placeholder = \"Search...\";\r\n\r\n        this.searchDelay = 200;\r\n\r\n        this.itemSelected = new EventEmitter<T>();\r\n    }\n/**\n * @return {?}\n */\npublic ngAfterViewInit() {\r\n        this._menu.service = this.dropdownService;\r\n    }\n/**\n * @param {?} item\n * @return {?}\n */\npublic select(item:T) {\r\n        this.writeValue(item);\r\n        this.itemSelected.emit(item);\r\n    }\n/**\n * @param {?} e\n * @return {?}\n */\npublic onClick(e:MouseEvent) {\r\n        if (this.searchService.query.length > 0) {\r\n            // Only open on click when there is a query entered.\r\n            this.dropdownService.setOpenState(true);\r\n        }\r\n    }\n/**\n * @param {?} e\n * @return {?}\n */\npublic onDocumentClick(e:MouseEvent) {\r\n        if (!this._element.nativeElement.contains(e.target)) {\r\n            this.dropdownService.setOpenState(false);\r\n        }\r\n    }\n/**\n * @param {?} object\n * @return {?}\n */\npublic readValue(object:T) {\r\n        return readValue<T, string>(object, this.searchService.optionsField);\r\n    }\n/**\n * @param {?} item\n * @return {?}\n */\npublic writeValue(item:T) {\r\n        this.selectedItem = item;\r\n        this.searchService.updateQuery(item ? /** @type {?} */(( this.readValue(item) as string)) : \"\");\r\n    }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\r\n    selector: 'sui-search',\r\n    template: `\r\n<div class=\"ui input\" [class.icon]=\"hasIcon\">\r\n    <input class=\"prompt\" type=\"text\" [attr.placeholder]=\"placeholder\" autocomplete=\"off\" [(ngModel)]=\"query\">\r\n    <i *ngIf=\"hasIcon\" class=\"search icon\"></i>\r\n  </div>\r\n<div class=\"results\" suiDropdownMenu menuTransition=\"scale\" menuSelectedItemClass=\"active\">\r\n    <a class=\"result item\" *ngFor=\"let r of results\" (click)=\"select(r)\">\r\n        <span *ngIf=\"!searchService.optionsLookup\" [innerHTML]=\"searchService.highlightMatches(r)\"></span>\r\n        <span *ngIf=\"searchService.optionsLookup\">{{ readValue(r) }}</span>\r\n    </a>\r\n    <div *ngIf=\"results.length == 0\" class=\"message empty\">\r\n        <div class=\"header\">No Results</div>\r\n        <div class=\"description\">Your search returned no results.</div>\r\n    </div>\r\n</div>\r\n`,\r\n    styles: [`\r\n/* Ensures results div has margin. */\r\n:host {\r\n    display: inline-block;\r\n}\r\n\r\n/* Fixes positioning when results are pushed above the search. */\r\n.results {\r\n    margin-bottom: .5em;\r\n}\r\n`]\r\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'_menu': [{ type: ViewChild, args: [SuiDropdownMenu, ] },],\n'_searchClasses': [{ type: HostBinding, args: ['class.ui', ] },{ type: HostBinding, args: ['class.search', ] },],\n'isActive': [{ type: HostBinding, args: ['class.active', ] },],\n'hasIcon': [{ type: Input },],\n'placeholder': [{ type: Input },],\n'options': [{ type: Input },],\n'optionsField': [{ type: Input },],\n'searchDelay': [{ type: Input },],\n'isSearching': [{ type: HostBinding, args: ['class.loading', ] },],\n'itemSelected': [{ type: Output },],\n'onClick': [{ type: HostListener, args: [\"click\", ['$event'], ] },],\n'onDocumentClick': [{ type: HostListener, args: [\"document:click\", [\"$event\"], ] },],\n};\n}\n\nfunction SuiSearch_tsickle_Closure_declarations() {\n/** @type {?} */\nSuiSearch.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nSuiSearch.ctorParameters;\n/** @type {?} */\nSuiSearch.propDecorators;\n/** @type {?} */\nSuiSearch.prototype.dropdownService;\n/** @type {?} */\nSuiSearch.prototype.searchService;\n/** @type {?} */\nSuiSearch.prototype._menu;\n/** @type {?} */\nSuiSearch.prototype._searchClasses;\n/** @type {?} */\nSuiSearch.prototype.hasIcon;\n/** @type {?} */\nSuiSearch.prototype.placeholder;\n/** @type {?} */\nSuiSearch.prototype.selectedItem;\n/** @type {?} */\nSuiSearch.prototype.itemSelected;\n/** @type {?} */\nSuiSearch.prototype._element;\n}\n\nexport class SuiSearchValueAccessor<T> extends CustomValueAccessor<T, SuiSearch<T>> {\n/**\n * @param {?} host\n */\nconstructor(host:SuiSearch<T>) {\r\n        super(host);\r\n    }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\r\n    selector: 'sui-search',\r\n    host: { '(onItemSelected)': 'onChange($event)' },\r\n    providers: [customValueAccessorFactory(SuiSearchValueAccessor)]\r\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: SuiSearch, },\n];\n}\n\nfunction SuiSearchValueAccessor_tsickle_Closure_declarations() {\n/** @type {?} */\nSuiSearchValueAccessor.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nSuiSearchValueAccessor.ctorParameters;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}